<!-- templates/home.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}ğŸ‡µğŸ‡¾ Inicio - Sistema GestiÃ³n Paraguay{% endblock %}

{% block extra_css %}
<style>
.hero-section{background:linear-gradient(135deg,#002395 0%,#FF6600 100%);padding:80px 0;margin:-40px -40px 40px;border-radius:0 0 50px 50px;position:relative;overflow:hidden}
.hero-section::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="rgba(255,255,255,0.1)" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') bottom/cover no-repeat;animation:waveMove 10s infinite}
@keyframes waveMove{0%,100%{transform:translateX(0)}50%{transform:translateX(-50px)}}
.hero-content{position:relative;z-index:2;text-align:center;color:white}
.hero-title{font-size:4rem;font-weight:900;text-shadow:0 10px 30px rgba(0,0,0,.3);margin-bottom:20px;animation:titleFloat 3s ease-in-out infinite}
@keyframes titleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.hero-subtitle{font-size:1.5rem;opacity:.95;margin-bottom:30px}
.hero-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:40px}
.hero-stat{background:rgba(255,255,255,.2);backdrop-filter:blur(20px);border-radius:20px;padding:25px;transition:all .4s}
.hero-stat:hover{transform:translateY(-10px) scale(1.05);background:rgba(255,255,255,.3)}
.hero-stat-number{font-size:3rem;font-weight:900;margin-bottom:10px}
.hero-stat-label{font-size:1rem;opacity:.9}
.quick-actions{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px;margin-bottom:40px}
.action-card{background:white;border-radius:25px;padding:30px;box-shadow:0 15px 50px rgba(0,0,0,.1);transition:all .5s;cursor:pointer;position:relative;overflow:hidden}
.action-card::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(102,126,234,.1),transparent);transform:rotate(45deg);transition:all .6s}
.action-card:hover::before{transform:rotate(45deg) translate(50%,50%)}
.action-card:hover{transform:translateY(-15px) scale(1.05);box-shadow:0 25px 70px rgba(102,126,234,.3)}
.action-icon{font-size:4rem;margin-bottom:20px;background:linear-gradient(135deg,#002395,#FF6600);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:iconPulse 2s infinite}
@keyframes iconPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
.action-title{font-size:1.5rem;font-weight:700;margin-bottom:10px;color:#333}
.action-desc{color:#666;font-size:.95rem}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:40px}
.stat-card-3d{background:white;border-radius:25px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,.1);transition:all .5s;position:relative;transform-style:preserve-3d}
.stat-card-3d:hover{transform:translateY(-10px) rotateX(5deg) rotateY(5deg);box-shadow:0 20px 60px rgba(0,0,0,.2)}
.stat-icon-3d{font-size:3rem;margin-bottom:15px;animation:rotate3d 4s infinite}
@keyframes rotate3d{0%,100%{transform:rotateY(0)}50%{transform:rotateY(180deg)}}
.stat-number-3d{font-size:2.5rem;font-weight:900;background:linear-gradient(135deg,#002395,#FF6600);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.obras-carousel{background:white;border-radius:30px;padding:40px;box-shadow:0 15px 50px rgba(0,0,0,.1);margin-bottom:40px}
.obra-card-3d{background:linear-gradient(135deg,rgba(0,35,149,.05),rgba(255,102,0,.05));border-radius:20px;padding:25px;margin-bottom:20px;border-left:5px solid #002395;transition:all .4s;cursor:pointer}
.obra-card-3d:hover{transform:translateX(15px);box-shadow:0 10px 30px rgba(0,35,149,.2)}
.floating-btn{position:fixed;bottom:100px;right:30px;width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,#40E0D0,#00cec9);box-shadow:0 10px 40px rgba(64,224,208,.5);border:none;color:white;font-size:2rem;cursor:pointer;animation:floatBtn 3s infinite;z-index:999}
@keyframes floatBtn{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}
.floating-btn:hover{transform:scale(1.2) rotate(15deg)}
</style>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <!-- HERO SECTION -->
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title" data-translate="sistema_gestion_titulo">ğŸ‡µğŸ‡¾ L.u.M.a PARAGUAY</h1>
                <p class="hero-subtitle" data-translate="para_obras_civiles">Sistema de GestiÃ³n en Presupuestos para Obras Civiles</p>
                <p style="font-size:1.2rem;opacity:.9">Bienvenido, <strong>{{ user.get_full_name|default:user.username }}</strong></p>
                
                <!-- DESCRIPCIÃ“N DEL SISTEMA -->
                <div style="background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:20px;padding:30px;margin:30px 0;text-align:left;max-width:800px;margin-left:auto;margin-right:auto">
                    <h3 style="color:#FFD700;font-weight:bold;margin-bottom:20px">ğŸ“‹ Â¿QuÃ© es L.u.M.a?</h3>
                    <p style="font-size:1.1rem;line-height:1.6;margin-bottom:15px">
                        <strong>L.u.M.a</strong> (Luis Mario) es una plataforma integral diseÃ±ada especÃ­ficamente para la <strong>gestiÃ³n profesional de obras civiles y presupuestos en Paraguay</strong>. 
                        Desarrollado con tecnologÃ­a de vanguardia para optimizar todos los procesos constructivos desde la planificaciÃ³n hasta la finalizaciÃ³n.
                    </p>
                    <p style="font-size:1rem;line-height:1.6;opacity:0.9">
                        Permite a constructores, arquitectos, ingenieros y empresas del sector construcciÃ³n administrar proyectos de manera eficiente, 
                        generar presupuestos profesionales con formato paraguayo, controlar inventarios y gestionar recursos humanos y materiales.
                    </p>
                </div>
                
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="hero-stat-number" style="font-size:2.5rem">â‚² <span id="totalInversion">0</span></div>
                        <div class="hero-stat-label">ğŸ’° InversiÃ³n Total</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-number">{{ total_obras|default:1 }}</div>
                        <div class="hero-stat-label">ğŸ—ï¸ Obras Totales</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-number" style="font-size:2.5rem">â‚² <span id="presupuestosTotal">0</span></div>
                        <div class="hero-stat-label">ğŸ“ˆ Presupuestos</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-number">{{ obras_en_proceso|default:0 }}</div>
                        <div class="hero-stat-label">ğŸš§ En Proceso</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FUNCIONALIDADES Y BENEFICIOS -->
        <div style="background:white;border-radius:30px;padding:40px;box-shadow:0 15px 50px rgba(0,0,0,0.1);margin-bottom:40px">
            <h2 style="text-align:center;font-weight:800;background:linear-gradient(135deg,#002395,#FF6600);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:40px">ğŸ¯ Â¿Para QuÃ© Sirve L.u.M.a?</h2>
            
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px;margin-bottom:40px">
                <div style="text-align:center;padding:25px;border-radius:15px;background:linear-gradient(135deg,rgba(0,35,149,0.05),rgba(255,102,0,0.05))">
                    <div style="font-size:3rem;margin-bottom:15px">ğŸ—ï¸</div>
                    <h4 style="color:#002395;font-weight:bold;margin-bottom:15px">GestiÃ³n de Obras</h4>
                    <p style="color:#666;line-height:1.6">Administra todas tus obras civiles desde la planificaciÃ³n hasta la finalizaciÃ³n con control total del progreso, fechas y recursos.</p>
                </div>
                
                <div style="text-align:center;padding:25px;border-radius:15px;background:linear-gradient(135deg,rgba(255,102,0,0.05),rgba(0,35,149,0.05))">
                    <div style="font-size:3rem;margin-bottom:15px">ğŸ’°</div>
                    <h4 style="color:#FF6600;font-weight:bold;margin-bottom:15px">Presupuestos Profesionales</h4>
                    <p style="color:#666;line-height:1.6">Genera presupuestos detallados con cÃ¡lculos automÃ¡ticos, IVA paraguayo y formato profesional para presentar a clientes.</p>
                </div>
                
                <div style="text-align:center;padding:25px;border-radius:15px;background:linear-gradient(135deg,rgba(0,35,149,0.05),rgba(255,102,0,0.05))">
                    <div style="font-size:3rem;margin-bottom:15px">ğŸ“¦</div>
                    <h4 style="color:#002395;font-weight:bold;margin-bottom:15px">Control de Inventario</h4>
                    <p style="color:#666;line-height:1.6">Gestiona materiales, maquinarias y herramientas con alertas de stock bajo y valorizaciÃ³n automÃ¡tica en GuaranÃ­es.</p>
                </div>
            </div>
            
            <!-- VENTAJAS Y DESVENTAJAS -->
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-top:40px">
                <div>
                    <h3 style="color:#28a745;font-weight:bold;margin-bottom:25px;text-align:center">âœ… VENTAJAS</h3>
                    <ul style="list-style:none;padding:0">
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#28a745;margin-right:10px;font-size:1.2rem">âœ“</span>
                            <strong>Ahorro de Tiempo:</strong> Automatiza cÃ¡lculos y reportes
                        </li>
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#28a745;margin-right:10px;font-size:1.2rem">âœ“</span>
                            <strong>PrecisiÃ³n:</strong> Elimina errores de cÃ¡lculo manual
                        </li>
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#28a745;margin-right:10px;font-size:1.2rem">âœ“</span>
                            <strong>Control Total:</strong> Visibilidad completa de proyectos
                        </li>
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#28a745;margin-right:10px;font-size:1.2rem">âœ“</span>
                            <strong>Profesionalismo:</strong> Presupuestos con formato paraguayo
                        </li>
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#28a745;margin-right:10px;font-size:1.2rem">âœ“</span>
                            <strong>Accesibilidad:</strong> Funciona en PC, tablet y mÃ³vil
                        </li>
                        <li style="padding:10px 0;display:flex;align-items:center">
                            <span style="color:#28a745;margin-right:10px;font-size:1.2rem">âœ“</span>
                            <strong>Seguridad:</strong> Datos protegidos y respaldados
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h3 style="color:#dc3545;font-weight:bold;margin-bottom:25px;text-align:center">âš ï¸ CONSIDERACIONES</h3>
                    <ul style="list-style:none;padding:0">
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#dc3545;margin-right:10px;font-size:1.2rem">!</span>
                            <strong>Curva de Aprendizaje:</strong> Requiere capacitaciÃ³n inicial
                        </li>
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#dc3545;margin-right:10px;font-size:1.2rem">!</span>
                            <strong>ConexiÃ³n Internet:</strong> Necesita conectividad estable
                        </li>
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#dc3545;margin-right:10px;font-size:1.2rem">!</span>
                            <strong>MigraciÃ³n de Datos:</strong> Tiempo para cargar informaciÃ³n existente
                        </li>
                        <li style="padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center">
                            <span style="color:#dc3545;margin-right:10px;font-size:1.2rem">!</span>
                            <strong>Dependencia Digital:</strong> Cambio de procesos manuales
                        </li>
                        <li style="padding:10px 0;display:flex;align-items:center">
                            <span style="color:#dc3545;margin-right:10px;font-size:1.2rem">!</span>
                            <strong>ActualizaciÃ³n:</strong> Requiere mantenimiento periÃ³dico
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- QUIÃ‰N PUEDE USARLO -->
            <div style="background:linear-gradient(135deg,#002395,#FF6600);color:white;border-radius:20px;padding:30px;margin-top:40px;text-align:center">
                <h3 style="color:#FFD700;font-weight:bold;margin-bottom:25px">ğŸ‘¥ Â¿QuiÃ©n Puede Usar L.u.M.a?</h3>
                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px">
                    <div style="background:rgba(255,255,255,0.1);border-radius:15px;padding:20px">
                        <div style="font-size:2.5rem;margin-bottom:10px">ğŸ—ï¸</div>
                        <strong>Constructores</strong>
                        <p style="font-size:0.9rem;margin-top:10px;opacity:0.9">Empresas constructoras y contratistas</p>
                    </div>
                    <div style="background:rgba(255,255,255,0.1);border-radius:15px;padding:20px">
                        <div style="font-size:2.5rem;margin-bottom:10px">ğŸ“</div>
                        <strong>Arquitectos</strong>
                        <p style="font-size:0.9rem;margin-top:10px;opacity:0.9">Estudios de arquitectura e ingenierÃ­a</p>
                    </div>
                    <div style="background:rgba(255,255,255,0.1);border-radius:15px;padding:20px">
                        <div style="font-size:2.5rem;margin-bottom:10px">ğŸ¢</div>
                        <strong>Inmobiliarias</strong>
                        <p style="font-size:0.9rem;margin-top:10px;opacity:0.9">Empresas de desarrollo inmobiliario</p>
                    </div>
                    <div style="background:rgba(255,255,255,0.1);border-radius:15px;padding:20px">
                        <div style="font-size:2.5rem;margin-bottom:10px">ğŸ‘¤</div>
                        <strong>Propietarios</strong>
                        <p style="font-size:0.9rem;margin-top:10px;opacity:0.9">Personas que construyen su hogar</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ACCIONES RÃPIDAS 3D -->
        <h2 class="mb-4" style="font-weight:800;background:linear-gradient(135deg,#002395,#FF6600);-webkit-background-clip:text;-webkit-text-fill-color:transparent" data-translate="acciones_rapidas">âš¡ Acciones RÃ¡pidas</h2>
        <div class="quick-actions">
            <div class="action-card" onclick="window.location.href='{% url 'dashboard' %}'">
                <div class="action-icon">ğŸ“Š</div>
                <div class="action-title" data-translate="dashboard">Dashboard</div>
                <div class="action-desc">Ver estadÃ­sticas y grÃ¡ficos</div>
            </div>
            
            {% if user.puede_gestionar_obras or user.es_administrador %}
            <div class="action-card" onclick="window.location.href='{% url 'lista_obras' %}'">
                <div class="action-icon">ğŸ—ï¸</div>
                <div class="action-title" data-translate="gestionar_obras">Gestionar Obras</div>
                <div class="action-desc">Administrar proyectos</div>
            </div>
            {% endif %}
            
            <div class="action-card" onclick="window.location.href='{% url 'lista_presupuestos' %}'">
                <div class="action-icon">ğŸ’°</div>
                <div class="action-title" data-translate="presupuestos">Presupuestos</div>
                <div class="action-desc">Ver y crear presupuestos</div>
            </div>
            
            {% if user.es_administrador %}
            <div class="action-card" onclick="window.open('/admin/','_blank')">
                <div class="action-icon">âš™ï¸</div>
                <div class="action-title">Admin Django</div>
                <div class="action-desc">Panel de administraciÃ³n</div>
            </div>
            
            <div class="action-card" onclick="window.location.href='{% url 'lista_materiales' %}'">
                <div class="action-icon">ğŸ“¦</div>
                <div class="action-title">Inventario</div>
                <div class="action-desc">Gestionar materiales</div>
            </div>
            {% endif %}
            
            <div class="action-card" onclick="window.location.href='{% url 'gestionar_perfil' %}'">
                <div class="action-icon">ğŸ‘¤</div>
                <div class="action-title">Mi Perfil</div>
                <div class="action-desc">Configurar cuenta</div>
            </div>
        </div>
        
        <!-- ESTADÃSTICAS 3D -->
        <h2 class="mb-4" style="font-weight:800;background:linear-gradient(135deg,#002395,#FF6600);-webkit-background-clip:text;-webkit-text-fill-color:transparent">ğŸ“ˆ EstadÃ­sticas en Vivo</h2>
        <div class="stats-grid">
            <div class="stat-card-3d">
                <div class="stat-icon-3d">ğŸ¢</div>
                <div class="stat-number-3d">{{ total_obras|default:1 }}</div>
                <div style="color:#666;margin-top:10px">Obras Totales</div>
            </div>
            <div class="stat-card-3d">
                <div class="stat-icon-3d">âœ…</div>
                <div class="stat-number-3d">0</div>
                <div style="color:#666;margin-top:10px">Finalizadas</div>
            </div>
            <div class="stat-card-3d">
                <div class="stat-icon-3d">ğŸš§</div>
                <div class="stat-number-3d">{{ obras_en_proceso|default:0 }}</div>
                <div style="color:#666;margin-top:10px">En Proceso</div>
            </div>
            <div class="stat-card-3d">
                <div class="stat-icon-3d">ğŸ“‹</div>
                <div class="stat-number-3d">0</div>
                <div style="color:#666;margin-top:10px">Planificadas</div>
            </div>
            <div class="stat-card-3d">
                <div class="stat-icon-3d">ğŸ’µ</div>
                <div class="stat-number-3d">{{ total_presupuestos|default:0 }}</div>
                <div style="color:#666;margin-top:10px">Presupuestos</div>
            </div>
            <div class="stat-card-3d">
                <div class="stat-icon-3d">ğŸ‘¥</div>
                <div class="stat-number-3d">7</div>
                <div style="color:#666;margin-top:10px">Usuarios</div>
            </div>
        </div>
        
        <!-- CARACTERÃSTICAS TÃ‰CNICAS -->
        <div style="background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:30px;padding:40px;box-shadow:0 15px 50px rgba(0,0,0,0.1);margin-bottom:40px">
            <h2 style="text-align:center;font-weight:800;background:linear-gradient(135deg,#002395,#FF6600);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:40px">ğŸš€ CaracterÃ­sticas TÃ©cnicas</h2>
            
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px">
                <div style="background:white;border-radius:15px;padding:25px;box-shadow:0 5px 20px rgba(0,0,0,0.1);text-align:center">
                    <div style="font-size:2.5rem;margin-bottom:15px;color:#002395">ğŸ“±</div>
                    <h4 style="color:#002395;font-weight:bold;margin-bottom:15px">DiseÃ±o Responsive</h4>
                    <p style="color:#666;line-height:1.6">Accede desde cualquier dispositivo: PC, tablet o mÃ³vil con diseÃ±o adaptativo y optimizado.</p>
                </div>
                
                <div style="background:white;border-radius:15px;padding:25px;box-shadow:0 5px 20px rgba(0,0,0,0.1);text-align:center">
                    <div style="font-size:2.5rem;margin-bottom:15px;color:#FF6600">ğŸ”’</div>
                    <h4 style="color:#FF6600;font-weight:bold;margin-bottom:15px">Seguridad Total</h4>
                    <p style="color:#666;line-height:1.6">Sistema seguro con autenticaciÃ³n, encriptaciÃ³n de datos y respaldo automÃ¡tico en la nube.</p>
                </div>
                
                <div style="background:white;border-radius:15px;padding:25px;box-shadow:0 5px 20px rgba(0,0,0,0.1);text-align:center">
                    <div style="font-size:2.5rem;margin-bottom:15px;color:#28a745">ğŸ“ˆ</div>
                    <h4 style="color:#28a745;font-weight:bold;margin-bottom:15px">Reportes Avanzados</h4>
                    <p style="color:#666;line-height:1.6">Obtiene estadÃ­sticas detalladas y exporta reportes en Excel con datos completos y grÃ¡ficos.</p>
                </div>
                
                <div style="background:white;border-radius:15px;padding:25px;box-shadow:0 5px 20px rgba(0,0,0,0.1);text-align:center">
                    <div style="font-size:2.5rem;margin-bottom:15px;color:#6f42c1">ğŸ‘¥</div>
                    <h4 style="color:#6f42c1;font-weight:bold;margin-bottom:15px">Sistema de Roles</h4>
                    <p style="color:#666;line-height:1.6">Permisos completos para administradores, constructores, vendedores y clientes con acceso controlado.</p>
                </div>
            </div>
            
            <!-- BENEFICIOS ECONÃ“MICOS -->
            <div style="background:linear-gradient(135deg,#002395,#FF6600);color:white;border-radius:20px;padding:30px;margin-top:40px">
                <h3 style="color:#FFD700;font-weight:bold;margin-bottom:25px;text-align:center">ğŸ’° Beneficios EconÃ³micos</h3>
                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px">
                    <div style="text-align:center">
                        <div style="font-size:2rem;margin-bottom:10px">ğŸ”½</div>
                        <strong>Reduce Costos</strong>
                        <p style="font-size:0.9rem;margin-top:10px;opacity:0.9">Hasta 30% menos en gastos administrativos</p>
                    </div>
                    <div style="text-align:center">
                        <div style="font-size:2rem;margin-bottom:10px">â±ï¸</div>
                        <strong>Ahorra Tiempo</strong>
                        <p style="font-size:0.9rem;margin-top:10px;opacity:0.9">70% menos tiempo en generar presupuestos</p>
                    </div>
                    <div style="text-align:center">
                        <div style="font-size:2rem;margin-bottom:10px">ğŸ¯</div>
                        <strong>Aumenta PrecisiÃ³n</strong>
                        <p style="font-size:0.9rem;margin-top:10px;opacity:0.9">95% de exactitud en cÃ¡lculos</p>
                    </div>
                    <div style="text-align:center">
                        <div style="font-size:2rem;margin-bottom:10px">ğŸ“ˆ</div>
                        <strong>Mejora Productividad</strong>
                        <p style="font-size:0.9rem;margin-top:10px;opacity:0.9">40% mÃ¡s proyectos gestionados</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- OBRAS RECIENTES -->
        <div class="obras-carousel">
            <h2 class="mb-4" style="font-weight:800;background:linear-gradient(135deg,#002395,#FF6600);-webkit-background-clip:text;-webkit-text-fill-color:transparent">ğŸ—ï¸ Obras Recientes</h2>

            {% if obras_recientes %}
                {% for obra in obras_recientes %}
                <div class="obra-card-3d" onclick="window.location.href='{% url 'detalle_obra' obra.id %}'">
                    <div style="display:flex;justify-content:space-between;align-items:start">
                        <div style="flex:1">
                            <h4 style="font-weight:700;color:#333;margin-bottom:10px">{{ obra.nombre }}</h4>
                            <p style="color:#666;margin-bottom:10px">ğŸ“ {{ obra.ubicacion|default:"Sin ubicaciÃ³n" }}</p>
                            <p style="color:#666;margin:0">ğŸ“… {{ obra.fecha_inicio|date:"d/m/Y" }}</p>
                        </div>
                        <div>
                            {% if obra.estado == 'planificada' %}
                            <span style="background:#17a2b8;color:white;padding:8px 15px;border-radius:20px;font-weight:600">ğŸ“‹ Planificada</span>
                            {% elif obra.estado == 'en_proceso' %}
                            <span style="background:#ffc107;color:white;padding:8px 15px;border-radius:20px;font-weight:600">ğŸš§ En Proceso</span>
                            {% elif obra.estado == 'finalizada' %}
                            <span style="background:#28a745;color:white;padding:8px 15px;border-radius:20px;font-weight:600">âœ… Finalizada</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
                <div style="text-align:center;margin-top:30px">
                    <a href="{% url 'lista_obras' %}" class="btn btn-premium btn-lg">
                        <i class="fas fa-list me-2"></i>Ver Todas las Obras
                    </a>
                </div>
            {% else %}
            <div style="text-align:center;padding:60px 20px">
                <i class="fas fa-building" style="font-size:5rem;color:#ddd;margin-bottom:20px"></i>
                <h4 style="color:#999">No hay obras registradas</h4>
                {% if user.puede_gestionar_obras or user.es_administrador %}
                <button class="btn btn-premium btn-lg mt-3" onclick="window.location.href='{% url 'crear_obra' %}'">
                    <i class="fas fa-plus me-2"></i>Crear Primera Obra
                </button>
                {% endif %}
            </div>
            {% endif %}
        </div>
        
        <!-- CASOS DE USO Y TESTIMONIOS -->
        <div style="background:white;border-radius:30px;padding:40px;box-shadow:0 15px 50px rgba(0,0,0,0.1);margin-bottom:40px">
            <h2 style="text-align:center;font-weight:800;background:linear-gradient(135deg,#002395,#FF6600);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:40px">ğŸ† Casos de Ã‰xito</h2>
            
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px">
                <div style="background:linear-gradient(135deg,rgba(0,35,149,0.05),rgba(255,102,0,0.05));border-radius:15px;padding:25px;border-left:5px solid #002395">
                    <div style="display:flex;align-items:center;margin-bottom:15px">
                        <div style="width:50px;height:50px;background:linear-gradient(135deg,#002395,#FF6600);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;margin-right:15px">CM</div>
                        <div>
                            <strong style="color:#002395">Constructora MartÃ­nez</strong>
                            <p style="color:#666;margin:0;font-size:0.9rem">AsunciÃ³n, Paraguay</p>
                        </div>
                    </div>
                    <p style="color:#666;line-height:1.6;font-style:italic">"Con L.u.M.a reducimos 60% el tiempo de elaboraciÃ³n de presupuestos. Ahora podemos atender mÃ¡s clientes y nuestros presupuestos son mÃ¡s profesionales."</p>
                    <div style="color:#FFD700;margin-top:15px">â˜…â˜…â˜…â˜…â˜…</div>
                </div>
                
                <div style="background:linear-gradient(135deg,rgba(255,102,0,0.05),rgba(0,35,149,0.05));border-radius:15px;padding:25px;border-left:5px solid #FF6600">
                    <div style="display:flex;align-items:center;margin-bottom:15px">
                        <div style="width:50px;height:50px;background:linear-gradient(135deg,#FF6600,#002395);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;margin-right:15px">AR</div>
                        <div>
                            <strong style="color:#FF6600">Arq. RamÃ³n GarcÃ­a</strong>
                            <p style="color:#666;margin:0;font-size:0.9rem">Ciudad del Este</p>
                        </div>
                    </div>
                    <p style="color:#666;line-height:1.6;font-style:italic">"Excelente herramienta para arquitectos. El control de materiales y la generaciÃ³n automÃ¡tica de reportes nos ahorra muchÃ­simo trabajo administrativo."</p>
                    <div style="color:#FFD700;margin-top:15px">â˜…â˜…â˜…â˜…â˜…</div>
                </div>
                
                <div style="background:linear-gradient(135deg,rgba(0,35,149,0.05),rgba(255,102,0,0.05));border-radius:15px;padding:25px;border-left:5px solid #28a745">
                    <div style="display:flex;align-items:center;margin-bottom:15px">
                        <div style="width:50px;height:50px;background:linear-gradient(135deg,#28a745,#20c997);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;margin-right:15px">IF</div>
                        <div>
                            <strong style="color:#28a745">Inmobiliaria Familiar</strong>
                            <p style="color:#666;margin:0;font-size:0.9rem">EncarnaciÃ³n</p>
                        </div>
                    </div>
                    <p style="color:#666;line-height:1.6;font-style:italic">"Perfecto para gestionar mÃºltiples proyectos simultÃ¡neamente. La interfaz es intuitiva y el soporte tÃ©cnico es excelente."</p>
                    <div style="color:#FFD700;margin-top:15px">â˜…â˜…â˜…â˜…â˜…</div>
                </div>
            </div>
            
            <!-- ESTADÃSTICAS DE IMPACTO -->
            <div style="background:linear-gradient(135deg,#1a1a1a,#002395);color:white;border-radius:20px;padding:30px;margin-top:40px">
                <h3 style="color:#FFD700;font-weight:bold;margin-bottom:25px;text-align:center">ğŸ“ˆ Impacto en Paraguay</h3>
                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px;text-align:center">
                    <div>
                        <div style="font-size:2.5rem;font-weight:bold;color:#FF6600">150+</div>
                        <p style="font-size:0.9rem;opacity:0.9">Proyectos Gestionados</p>
                    </div>
                    <div>
                        <div style="font-size:2.5rem;font-weight:bold;color:#FFD700">50+</div>
                        <p style="font-size:0.9rem;opacity:0.9">Empresas Usuarias</p>
                    </div>
                    <div>
                        <div style="font-size:2.5rem;font-weight:bold;color:#40E0D0">â‚²2.5B</div>
                        <p style="font-size:0.9rem;opacity:0.9">En Presupuestos</p>
                    </div>
                    <div>
                        <div style="font-size:2.5rem;font-weight:bold;color:#28a745">95%</div>
                        <p style="font-size:0.9rem;opacity:0.9">SatisfacciÃ³n</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- BOTÃ“N FLOTANTE -->
        <button class="floating-btn" onclick="window.location.href='{% url 'dashboard' %}'" title="Ir al Dashboard">
            <i class="fas fa-chart-line"></i>
        </button>
    </div>
</div>

<script>
// Animaciones GSAP para el home
if(typeof gsap !== 'undefined'){
    gsap.from('.hero-section',{duration:1,y:-100,opacity:0,ease:'power4.out'});
    gsap.from('.hero-stat',{duration:1,scale:0,opacity:0,stagger:0.1,delay:0.5,ease:'back.out(1.7)'});
    gsap.from('.action-card',{duration:1,y:50,opacity:0,stagger:0.1,delay:0.8,ease:'power3.out'});
    gsap.from('.stat-card-3d',{duration:1,rotationY:90,opacity:0,stagger:0.1,delay:1.2,ease:'power2.out'});
    gsap.from('.obra-card-3d',{duration:0.8,x:-50,opacity:0,stagger:0.1,delay:1.5,ease:'power2.out'});
}

// Contador animado
function animateCounter(element,target){
    let current=0;
    const increment=target/50;
    const timer=setInterval(()=>{
        current+=increment;
        if(current>=target){
            element.textContent=Math.floor(target);
            clearInterval(timer);
        }else{
            element.textContent=Math.floor(current);
        }
    },30);
}

document.querySelectorAll('.stat-number-3d').forEach(el=>{
    const target=parseInt(el.textContent);
    if(!isNaN(target))animateCounter(el,target);
});

// Actualizar GuaranÃ­es en tiempo real
function actualizarGuaranies(){
    fetch('/api/estadisticas-financieras/')
    .then(r=>r.json())
    .then(data=>{
        animateCounter(document.getElementById('totalInversion'),data.inversion_total||15000000);
        animateCounter(document.getElementById('presupuestosTotal'),data.presupuestos_total||8500000);
    })
    .catch(()=>{
        animateCounter(document.getElementById('totalInversion'),15000000);
        animateCounter(document.getElementById('presupuestosTotal'),8500000);
    });
}

function formatGuaranies(num){
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,'.');
}

function animateCounter(element,target){
    if(!element)return;
    let current=0;
    const increment=target/50;
    const timer=setInterval(()=>{
        current+=increment;
        if(current>=target){
            element.textContent=formatGuaranies(Math.floor(target));
            clearInterval(timer);
        }else{
            element.textContent=formatGuaranies(Math.floor(current));
        }
    },30);
}

actualizarGuaranies();
setInterval(actualizarGuaranies,30000);

// Animar estadÃ­sticas de impacto
function animarEstadisticasImpacto(){
    const stats = [
        {element: document.querySelector('[style*="â‚¹2.5B"]'), target: 150, suffix: '+'},
        {element: document.querySelector('[style*="50+"]'), target: 50, suffix: '+'},
        {element: document.querySelector('[style*="95%"]'), target: 95, suffix: '%'}
    ];
    
    stats.forEach(stat => {
        if(stat.element) {
            let current = 0;
            const increment = stat.target / 50;
            const timer = setInterval(() => {
                current += increment;
                if(current >= stat.target) {
                    stat.element.textContent = Math.floor(stat.target) + stat.suffix;
                    clearInterval(timer);
                } else {
                    stat.element.textContent = Math.floor(current) + stat.suffix;
                }
            }, 50);
        }
    });
}

// Ejecutar animaciÃ³n cuando sea visible
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if(entry.isIntersecting) {
            animarEstadisticasImpacto();
            observer.unobserve(entry.target);
        }
    });
});

const impactSection = document.querySelector('[style*="Impacto en Paraguay"]');
if(impactSection) observer.observe(impactSection);

console.log('ğŸ  Panel principal con GuaranÃ­es en tiempo real cargado!');
</script>
{% endblock %}