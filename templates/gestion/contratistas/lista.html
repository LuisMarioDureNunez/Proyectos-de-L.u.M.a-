{% extends 'base.html' %}
{% load static %}

{% block title %}üè¢ Contratistas - Gesti√≥n Avanzada{% endblock %}

{% block extra_css %}
<style>
:root {
    --azul-francia: #002395;
    --naranja: #FF6600;
    --negro: #1a1a1a;
}

.contratistas-hero {
    background: linear-gradient(135deg, var(--azul-francia) 0%, var(--negro) 100%);
    border-radius: 25px;
    padding: 3rem;
    color: white;
}

.contratista-card {
    background: white;
    border-radius: 20px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    border-left: 5px solid var(--naranja);
    transition: all 0.4s ease;
}

.contratista-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.stats-card {
    background: linear-gradient(135deg, var(--azul-francia) 0%, var(--naranja) 100%);
    border-radius: 15px;
    padding: 20px;
    color: white;
    text-align: center;
    animation: pulse-glow 3s infinite;
}

@keyframes pulse-glow {
    0%, 100% { box-shadow: 0 5px 20px rgba(0,35,149,0.3); }
    50% { box-shadow: 0 10px 30px rgba(255,102,0,0.5); }
}

.btn-francia {
    background: linear-gradient(45deg, var(--azul-francia), var(--naranja));
    border: none;
    color: white;
    padding: 12px 25px;
    border-radius: 25px;
    font-weight: 600;
}

.floating-action {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: linear-gradient(45deg, var(--naranja), #fd7e14);
    color: white;
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 1.5rem;
    z-index: 1000;
}
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <div class="contratistas-hero">
                <h1 class="display-4 fw-bold mb-3">üè¢ Gesti√≥n de Contratistas</h1>
                <p class="lead">Control avanzado de contratistas especializados en Paraguay</p>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-xl-3 col-md-6">
            <div class="stats-card">
                <i class="fas fa-users fa-3x mb-3"></i>
                <h3>{{ stats.total_contratistas|default:0 }}</h3>
                <p>Total Contratistas</p>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="stats-card">
                <i class="fas fa-check-circle fa-3x mb-3"></i>
                <h3>{{ stats.disponibles|default:0 }}</h3>
                <p>Disponibles</p>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="stats-card">
                <i class="fas fa-star fa-3x mb-3"></i>
                <h3>{{ stats.calificacion_promedio|floatformat:1|default:0 }}</h3>
                <p>Calificaci√≥n Promedio</p>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="stats-card">
                <i class="fas fa-briefcase fa-3x mb-3"></i>
                <h3>{{ stats.ocupados|default:0 }}</h3>
                <p>En Trabajo</p>
            </div>
        </div>
    </div>

    <div class="row">
        {% for contratista in contratistas %}
        <div class="col-xl-6 col-lg-12 mb-4">
            <div class="contratista-card">
                <h5 class="fw-bold text-primary">{{ contratista.nombre_empresa|default:contratista.usuario.get_full_name }}</h5>
                <p class="text-muted">{{ contratista.get_especialidad_display }}</p>
                <div class="d-flex justify-content-between">
                    <span class="badge bg-success">{{ contratista.get_estado_display }}</span>
                    <strong class="text-success">{{ contratista.tarifa_por_dia|floatformat:0 }} Gs./d√≠a</strong>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center py-5">
            <i class="fas fa-users fa-5x text-muted mb-3"></i>
            <h4 class="text-muted">No hay contratistas registrados</h4>
        </div>
        {% endfor %}
    </div>
</div>

<button class="floating-action" onclick="window.location.href='{% url 'nuevo_contratista' %}'">
    <i class="fas fa-plus"></i>
</button>
{% endblock %}